// ネットワーク通信を利用して
// 新型コロナ陽性者数を取得するサンプル　その3 発展編
// （データは厚生労働省のオープンデータを利用）

// ネットワーク通信を利用してデータを受信する
API＝「./api/get_pcr_positive_daily2.php」。
APIからAJAXテキスト取得。
それをCSV取得して結果へ代入。

// 都道府県名を取得
地域一覧＝結果[0]を配列複製。
地域一覧の0を配列削除。
地域一覧の0を配列削除。
地域ボックス＝地域一覧のセレクトボックス作成。
グラフボタン＝「グラフ描画」のボタン作成。
色チェック＝「色を変更」のチェックボックス作成。

グラフボタンをクリックした時には
    // 全国データを取得
    日付＝結果の0を表列取得。
    陽性者数＝結果の1を表列取得。

    // 地域データを取得
    地域列＝地域ボックスの「selectedIndex」をDOM属性取得。
    地域陽性者数＝結果の(地域列+2)を表列取得。
    地域名＝地域陽性者数[0]。

    // 表示用の二次元配列を作成
    データ＝「{日付}{改行}{陽性者数}{改行}{地域陽性者数}」をCSV取得。
    データ＝データの表行列交換。

    色＝色チェックの「checked」をDOM属性取得。
    もし，色＝オフならば
        // グラフ描画 方法１ 標準の配色
        データ[0]＝["日付", "全国",地域名]。  // グラフのラベルを追加
        データを棒グラフ描画。
    違えば
        // グラフ描画 方法２ 配色を変えたいとき
        日付の0を配列削除。
        陽性者数の0を配列削除。
        地域陽性者数の0を配列削除。
        dataset = {
            labels: 日付,
            datasets: [{
              label: '全国',
              data: 陽性者数,
              backgroundColor: 'rgba(255,0,0,0.5)'
            },{
              label: 地域名,
              data: 地域陽性者数,
              backgroundColor: 'rgba(0,255,255,1)'
            }]}
        datasetの棒グラフ描画。
    ここまで。
ここまで。
